<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:adm="http://github.com/adminfaces"
                template="#{layoutMB.template}"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html">

    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam name="id" value="#{escaleBean.id}" converter="javax.faces.Integer"/>
            <!-- use view action if you are in a Java EE 7 server:--> 
            <f:viewAction action="#{escaleBean.initBean}"/>
            <!--f:event type="preRenderView" listener="#{escaleBean.initBean()}"/-->
        </f:metadata>
        <style type="text/css">
            .ui-datatable .ui-datatable-header {
                text-align: right !important;
            }

            th.ui-filter-column {
                padding: 5px 2px !important;
            }

            #footer:hover {
                opacity: .7;
            }

            #footer {
                float: right;
                font-size: 12px;
                color: #3c8dbc;
                font-weight: 500;
                border: 0;
            }

            .ui-datatable-footer {
                border: none;
            }
            .ui-columntoggler{
                width: 125px !important;
            }

            .ui-columntoggler .ui-columntoggler-item label {
                padding-left: 1.5em !important;
                margin-bottom: -5px !important;
            }
            .ui-button-text-only .ui-button-text {
                padding: .5em .2em !important;
            }
            .ui-panelgrid .ui-panelgrid-cell {
                padding: 0px 10px !important;
            }
            .ui-fluid .ui-inputfield {
                height: 36px !important;
            }
            .float-right{float:right!important}
            .ui-panelgrid .ui-panelgrid-cell {
                padding: 0px 10px 0px 0px!important;
                text-align:center!important;
            }
        </style>
    </ui:define>

    <ui:define name="title">
        Escale N° <b>#{escaleBean.entity.numero}</b> du navire <b>#{escaleBean.entity.navire}</b> 
        prévu le <b>
            <h:outputText value="#{escaleBean.format.parse(escaleBean.entity.arrivee.concat(escaleBean.entity.arrH))}">
                <f:convertDateTime pattern="dd/MM/yyyy hh:mm"/>
            </h:outputText>
        </b>
    </ui:define>

    <ui:define name="body">
        <adm:breadcrumb title="#{'Escale '.concat(escaleBean.entity.numero.substring(6))}" link="escale/detail.xhtml?id=#{escaleBean.id}"/>

        <div class="container-fluid">
            <div class="row">
                <div class="col-md-3">

                    <p:panel class="box box-primary box-outline" >
                        <!-- Profile Image -->
                        <!--div class="card card-primary card-outline">
                          <div class="card-body box-profile"-->
                        <div class="text-center">
                            <p:graphicImage class="profile-user-img img-fluid img-circle" value="#{resource['images/logo-papn.png']}"/>
                        </div>
                        <!--div class="text-center">
                            <img class="profile-user-img img-fluid img-circle" src="../resources/images/logo-papn.png"
                                 alt="User profile picture"/>
                        </div-->

                        <h3 class="profile-username text-center">#{escaleBean.entity.navire}</h3>
                        <h4 class="text-center">#{escaleBean.entity.nacleunik.type.libelle}</h4>

                        <p class="text-muted text-center">#{escaleBean.entity.agent.libelle}</p>
                        <h4 class="text-center" style="font-family: 'Impact';color: #{e.situat eq 'ATTENDU' ? 'yellow'
                                                                                      :escaleBean.entity.situat eq 'ANNULE' ?'red'
                                                                                      :escaleBean.entity.situat eq 'RADE EXT' ? 'blue'
                                                                                      :escaleBean.entity.situat eq 'A QUAI' ? 'green'
                                                                                      :escaleBean.entity.situat eq 'PARTI' ? 'black'
                                                                                      :'darkblue'}">#{escaleBean.entity.situat}</h4>

                        <ul class="list-group list-group-unbordered mb-3">
                            <li class="list-group-item">
                                <b>ETA</b>
                                <a class="float-right">
                                    <h:outputText value="#{escaleBean.format.parse(escaleBean.entity.arrivee.concat(escaleBean.entity.arrH)) }" 
                                                  rendered="#{not empty escaleBean.entity.arrivee}">
                                        <f:convertDateTime pattern="dd/MM/yyyy hh:mm"/>
                                    </h:outputText>
                                </a>
                            </li>
                            <li class="list-group-item">
                                <b>N° voyage</b>
                                <a class="float-right">
                                    <h:outputText value="#{escaleBean.entity.voyage}"/>
                                </a>
                            </li>
                            <li class="list-group-item">
                                <b>Arrivée en rade</b>
                                <a class="float-right">
                                    <h:outputText value="#{escaleBean.format.parse(escaleBean.entity.arriveeRade.concat(escaleBean.entity.arrHRade)) }" 
                                                  rendered="#{not empty escaleBean.entity.arriveeRade}">
                                        <f:convertDateTime pattern="dd/MM/yyyy hh:mm"/>
                                    </h:outputText>
                                </a>
                            </li>
                            <li class="list-group-item">
                                <b>Mis à quai</b>
                                <a class="float-right">
                                    <h:outputText value="#{escaleBean.format.parse(escaleBean.entity.datePasseEntree.concat(escaleBean.entity.heurePasseEntree))}" rendered="#{not empty escaleBean.entity.datePasseEntree}" >
                                        <f:convertDateTime pattern="dd/MM/yyyy hh:mm"/>
                                    </h:outputText>
                                </a>
                            </li>
                            <li class="list-group-item">
                                <b>Date de sortie</b>
                                <a class="float-right">
                                    <h:outputText value="#{escaleBean.format.parse(escaleBean.entity.departEffectif.concat(escaleBean.entity.depHEffectif))}" rendered="#{not empty escaleBean.entity.departEffectif}">
                                        <f:convertDateTime pattern="dd/MM/yyyy hh:mm"/>
                                    </h:outputText>
                                </a>
                            </li>
                            <li class="list-group-item">
                                <b>Sejour en rade</b>
                                <a class="float-right">
                                    <h:outputText value="#{escaleBean.entity.datePasseEntree-escaleBean.entity.arriveeRade } 
                                                  #{escaleBean.entity.datePasseEntree-escaleBean.entity.arriveeRade eq 1?'jr':'jrs'}"
                                                  rendered="#{not empty escaleBean.entity.datePasseEntree and not empty escaleBean.entity.arriveeRade}"/>

                                </a>
                            </li>
                            <li class="list-group-item">
                                <b>Sejour à quai</b>
                                <a class="float-right">
                                    <h:outputText value="#{escaleBean.entity.departEffectif-escaleBean.entity.datePasseEntree} 
                                                  #{escaleBean.entity.departEffectif-escaleBean.entity.datePasseEntree eq 1?'jr':'jrs'}"
                                                  rendered="#{not empty escaleBean.entity.datePasseEntree and not empty escaleBean.entity.departEffectif}"/>
                                </a>
                            </li>
                            <li class="list-group-item">
                                <b>Sejour au port</b>
                                <a class="float-right">
                                    <h:outputText value="#{escaleBean.entity.departEffectif-escaleBean.entity.arriveeRade}
                                                  #{escaleBean.entity.departEffectif-escaleBean.entity.arriveeRade eq 1?'jr':'jrs'}"
                                                  rendered="#{not empty escaleBean.entity.arriveeRade and not empty escaleBean.entity.departEffectif}"/>
                                </a>
                            </li>
                            <li class="list-group-item">
                                <b>Quai</b>
                                <a class="float-right">
                                    <h:outputText value="#{escaleBean.entity.quai.libelle} (#{escaleBean.entity.quai.code})"/>
                                </a>
                            </li>
                        </ul>

                        <a href="#" class="btn btn-primary btn-block"><b>Follow</b></a>
                        <!--/div-->
                    </p:panel>
                    <!-- /.card-body -->
                    <!--/div-->
                    <!-- /.card -->

                    <!-- About Me Box -->
                    <p:panel class="box box-primary box-solid" header="Détails">
                        <strong><i class="fa fa-ship mr-1"></i> Mesure du navire</strong>

                        <p:panelGrid columns="6" layout="grid"
                                     columnClasses="ui-g-2 text-muted,ui-g-2 text-muted,ui-g-2 text-muted,ui-g-2 text-muted,ui-g-2 text-muted,ui-g-2 text-muted"
                                     styleClass="ui-fluid">
                            <p:outputLabel value="Long." class="text-bold"/>
                            <p:outputLabel value="Larg." class="text-bold"/>
                            <p:outputLabel value="Tirant" class="text-bold"/>
                            <p:outputLabel value="Vol." class="text-bold"/>
                            <p:outputLabel value="TJN" class="text-bold"/>
                            <p:outputLabel value="TJB" class="text-bold"/>
                            <h:outputText value="#{escaleBean.entity.nacleunik.longu}" >
                                <f:convertNumber maxFractionDigits="2" locale="fr"/>
                            </h:outputText>
                            <h:outputText value="#{escaleBean.entity.nacleunik.largeur}" >
                                <f:convertNumber maxFractionDigits="2" locale="fr"/>
                            </h:outputText>
                            <h:outputText value="#{escaleBean.entity.nacleunik.hauteur}" >
                                <f:convertNumber maxFractionDigits="2" locale="fr"/>
                            </h:outputText>
                            <h:outputText value="#{escaleBean.entity.nacleunik.volume}" >
                                <f:convertNumber pattern="#0,000" locale="fr"/>
                            </h:outputText>
                            <h:outputText value="#{escaleBean.entity.nacleunik.chargN}">
                                <f:convertNumber pattern="#0,000" locale="fr"/>
                            </h:outputText>
                            <h:outputText value="#{escaleBean.entity.nacleunik.chargB}">
                                <f:convertNumber pattern="#0,000" locale="fr"/>
                            </h:outputText>
                        </p:panelGrid>

                        <hr/>
                    </p:panel>
                    <!-- /.card -->
                </div>
                <!-- /.col -->
                <div class="col-md-9">
                    <p:panel class="box box-primary">
                        <div class="row">
                            <div class="col-12 col-sm-4">
                                <div class="info-box bg-light">
                                    <div class="info-box-content">
                                        <span class="info-box-text text-center text-muted">Estimated budget</span>
                                        <span class="info-box-number text-center text-muted mb-0">2300</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-4">
                                <div class="info-box bg-light">
                                    <div class="info-box-content">
                                        <span class="info-box-text text-center text-muted">Total amount spent</span>
                                        <span class="info-box-number text-center text-muted mb-0">2000</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-sm-4">
                                <div class="info-box bg-light">
                                    <div class="info-box-content">
                                        <span class="info-box-text text-center text-muted">Estimated project duration</span>
                                        <span class="info-box-number text-center text-muted mb-0">20 </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p:tabView dynamic="true" cache="true" effect="fold" >
                            <p:tab title="Manifeste" titleStyleClass="box-solid">
                                <h:panelGrid  columns="2" cellpadding="5">
                                    <f:facet name="header">
                                        <h3 class="profile-username text-center">IMPORT</h3>
                                    </f:facet>
                                    <h:outputText value="Manifestes reçus:" style="font-weight: bold"/>
                                    <h:outputText value="#{escaleBean.nombreManifestes}" />

                                    <h:outputText value="B/Ls:" style="font-weight: bold"/>
                                    <h:outputText value="#{escaleBean.nombreBLs}" />

                                    <h:outputText value="40':" style="font-weight: bold"/>
                                    <h:outputText value="#{escaleBean.nombreCTNs}" />

                                    <h:outputText value="20':" style="font-weight: bold"/>
                                    <h:outputText value="#{escaleBean.nombreCTNs}" />
                                </h:panelGrid>
                                <h:panelGrid  columns="2" cellpadding="5">
                                    <f:facet name="header">
                                        <h3 class="profile-username text-center">EXPORT</h3>
                                    </f:facet>
                                    <h:outputText value="Manifestes reçus:" style="font-weight: bold"/>
                                    <h:outputText value="#{escaleBean.nombreManifestes}" />

                                    <h:outputText value="B/Ls:" style="font-weight: bold"/>
                                    <h:outputText value="#{escaleBean.nombreBLs}" />

                                    <h:outputText value="40':" style="font-weight: bold"/>
                                    <h:outputText value="#{escaleBean.nombreCTNs}" />

                                    <h:outputText value="20':" style="font-weight: bold"/>
                                    <h:outputText value="#{escaleBean.nombreCTNs}" />
                                </h:panelGrid>

                            </p:tab>
                            <p:tab title="Facture" titleStyleClass="box-solid">
                                <p:panelGrid style="margin-top:20px">
                                    <f:facet name="header">
                                        <p:row>
                                            <p:column colspan="7">1995-96 NBA Playoffs</p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="2">Conf. Semifinals</p:column>
                                            <p:column colspan="2">Conf. Finals</p:column>
                                            <p:column colspan="2">NBA Finals</p:column>
                                            <p:column>Champion</p:column>
                                        </p:row>

                                    </f:facet>

                                    <p:row>
                                        <p:column style="font-weight: bold;">Seattle</p:column>
                                        <p:column style="font-weight: bold;">4</p:column>

                                        <p:column rowspan="2" style="font-weight: bold;">Seattle</p:column>
                                        <p:column rowspan="2" style="font-weight: bold;">4</p:column>

                                        <p:column rowspan="5">Seattle</p:column>
                                        <p:column rowspan="5">2</p:column>

                                        <p:column rowspan="11" style="font-weight: bold;">Chicago</p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column>Houston</p:column>
                                        <p:column >0</p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column colspan="4" styleClass="ui-widget-header">
                                            <p:spacer height="0"/>
                                        </p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column style="font-weight: bold;">Utah</p:column>
                                        <p:column style="font-weight: bold;">4</p:column>

                                        <p:column rowspan="2">Utah</p:column>
                                        <p:column rowspan="2">3</p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column>San Antonio</p:column>
                                        <p:column >2</p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column colspan="6" styleClass="ui-widget-header">
                                            <p:spacer height="0"/>
                                        </p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column style="font-weight: bold;">Chicago</p:column>
                                        <p:column style="font-weight: bold;">4</p:column>

                                        <p:column rowspan="2" style="font-weight: bold;">Chicago</p:column>
                                        <p:column rowspan="2" style="font-weight: bold;">4</p:column>

                                        <p:column rowspan="5" style="font-weight: bold;">Chicago</p:column>
                                        <p:column rowspan="5" style="font-weight: bold;">4</p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column>New York</p:column>
                                        <p:column >1</p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column colspan="4" styleClass="ui-widget-header">
                                            <p:spacer height="0"/>
                                        </p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column>Atlanta</p:column>
                                        <p:column >1</p:column>

                                        <p:column rowspan="2">Orlando</p:column>
                                        <p:column rowspan="2">0</p:column>
                                    </p:row>

                                    <p:row>
                                        <p:column style="font-weight: bold;">Orlando</p:column>
                                        <p:column style="font-weight: bold;">4</p:column>
                                    </p:row>


                                    <f:facet name="footer">
                                        <p:row>
                                            <p:column  colspan="4" style="text-align: right">
                                                Finals MVP
                                            </p:column>
                                            <p:column  colspan="3" rowspan="3">
                                                Michael Jordan (Chicago)
                                            </p:column>
                                        </p:row>

                                        <p:row>
                                            <p:column  colspan="4" style="text-align: right">
                                                Season MVP
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column  colspan="4" style="text-align: right">
                                                Top Scorer
                                            </p:column>
                                        </p:row>
                                    </f:facet>
                                </p:panelGrid>
                            </p:tab>
                            <p:tab title="Autres" titleStyleClass="box-solid">

                            </p:tab>
                        </p:tabView>
                    </p:panel>            
                </div>
                <!-- /.col -->
            </div>
            <!-- /.row -->
        </div>
    </ui:define>

</ui:composition>
